# Laravel Redis Manager

A tool extending the Redis basic functionality for caching. It is basically used hash stored at key to value of redis.

## [#](#) Prerequisites
- [Laravel Framework](https://laravel.com) 9+ support
- [PHP](https://www.php.net) 8+ support
- [Redis](https://redis.io/) 6+ support

### [#](#) Config file
This package publishes a <b>`config/redis-manager.php`</b> file. If you already have a file by that name,  you must rename or remove it to avoid conflict using this package.

### [#](#) Redis setup
To setup Redis to your Laravel project visit [Laravel Redis Documentation](https://laravel.com/docs/9.x/redis).

## [#](#) Installation

1. Install the package via [composer](https://getcomposer.org/download).
  ```sh
  composer require jonreyg/laravel-redis-manager
  ```
2. To publish the package [config](https://github.com/jonreygalera/laravel-redis-manager-dev/blob/main/config/config.php) and [assets](https://github.com/jonreygalera/laravel-redis-manager-dev/tree/main/resources/assets).

  ```sh
  php artisan vendor:publish --provider="Jonreyg\LaravelRedisManager\LaravelRedisManagerServiceProvider"
  ```
3. Clear your config cache.
```
php artisan optimize:clear
 # or
php artisan config:clear
```
## [#](#) Getting started

### [#](#) Generating Redis Manager Classes
First, create a manager class file. The default directory of the redis manager classes live in the `app\RedisManager`. You may use the `make:redismanager` command to generate a new redis manager class.

```
php artisan make:redismanager User
```

### [#](#) Generated Redis Manager Classes
Redis Manager generated by the `make:redismanager` command will be placed in the `app\RedisManager` directory.
Example of the generated manager.

```
<?php

namespace App\RedisManager;

use Jonreyg\LaravelRedisManager\Bridge\RedisManager;

class User extends RedisManager
{
    protected $folder = 'user';
    protected $hash_key = 'id';

    protected $field_key_column = [
        'id' => 'int'
    ];
}

```

### [#](#) Folder
The protected `$folder` property value will set as the name of the key in Redis. You may change the value if it is necessary.

```
<?php

namespace App\RedisManager;

use Jonreyg\LaravelRedisManager\Bridge\RedisManager;

class User extends RedisManager
{
    protected $folder = 'user';
}

```

### [#](#) Hash key
The protected `$hash_key` property value will set as the primary key name of the generated Redis Manager class. You may change the value if it is necessary.

```
<?php

namespace App\RedisManager;

use Jonreyg\LaravelRedisManager\Bridge\RedisManager;

class User extends RedisManager
{
    protected $hash_key = 'id';
}

```
### [#](#) Field key column 
The protected `$field_key_column` property value will set as the attributes name of the generated Redis Manager class. You may change the value if it is necessary. The `$field_key_column` property must contain an array of `column name` as the `key` and `data type` of the `column name` as the  `value`.


```
<?php

namespace App\RedisManager;

use Jonreyg\LaravelRedisManager\Bridge\RedisManager;

class User extends RedisManager
{
    protected $field_key_column = [
        'id' => 'int'
    ];
}
```

Available Data types:
- int
- string
- float
- array
- bool

Syntax:
```
[ 'column_name' => 'data_type' ]
```

## [#](#) Usage

Once you have created a redis manager class, you can start inserting, retrieving or deleting data from the Redis storage.

### [#](#) Inserting data

Inserting data to the redis storage is using the redis function named [hmset](https://redis.io/commands/hmset/).

